<!DOCTYPE html>
<html>
  <head>
    <title>Custom Element</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
      // MDN: https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_templates_and_slots

      class CustomElement extends HTMLElement {
        // Web componenets interface ...
        
        static observedAttributes = ['attr'];

        constructor() {
          console.log('ctor');
          super();
        }
        attributeChangedCallback(name, oldVal, val) {
          console.log('attributeChanged', { name, oldVal, val });
          this.render({ [name]: val });
        }
        connectedCallback() { 
          console.log('connected');
        }
        disconnectedCallback() {
          console.log('disconnected');
        }

        // custom element interface ...

        get attr() { return this.getAttribute('attr') }
        set attr(val) { return this.setAttribute('attr', val) }

        render(options) {
          console.log('render', Object.keys(options));
        }
      }

      window.customElements.define('x-custom', CustomElement);

      window.addEventListener('load', () => {
        [document.createElement('x-custom')].forEach(el => {
          el.attr = '456';
          el.textContent = 'Xyz';
          document.body.appendChild(el);
        });
      });
    </script>
  </head>
  <body>
    <x-custom attr="123">
      <p>Abc</p>
      Def
    </x-custom>
  </body>
</html>
